<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Safra Type Tester, multi script</title>
  <style>
    :root { --cell-size: 60px; }

    /* ====== FONT FILES ====== */
    @font-face { font-family: "Sugar Serif"; font-weight: 400; font-style: normal; src: url("fonts/SugarSerif-Regular.woff2") format("woff2"); }
    @font-face { font-family: "Sugar Sans";  font-weight: 400; font-style: normal; src: url("fonts/SugarSans-Regular.woff2") format("woff2"); }
    @font-face { font-family: "Safra Sans";  font-weight: 400; font-style: normal; src: url("fonts/SafraSans-Regular.woff2") format("woff2"); }
    @font-face { font-family: "Safra Sans";  font-weight: 700; font-style: normal; src: url("fonts/SafraSans-Bold.woff2") format("woff2"); }
    @font-face { font-family: "Safra";       font-weight: 400; font-style: normal; src: url("fonts/Safra-Regular.woff2") format("woff2"); }
    @font-face { font-family: "Safra";       font-weight: 700; font-style: normal; src: url("fonts/Safra-Bold.woff2") format("woff2"); }
    @font-face { font-family: "Safra Mono";  font-weight: 400; font-style: normal; src: url("fonts/SafraMono-Mono.woff2") format("woff2"); }

    /* ====== RESET, LAYOUT ====== */
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin: 0; /*padding: 2.3rem;*/ padding: 90px; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color: #000; background: #fff; -webkit-font-smoothing: antialiased; }

    /* ====== TYPE TESTER SECTIONS ====== */
    .type-tester { margin: 0 auto 12rem auto; /*max-width: 1200px;*/ }

    .controls { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 1rem; padding: 0.9rem 0; border-top: 1px solid #000; border-bottom: 1px solid #000; margin-bottom: 2rem; }

    .sliders-wrapper { display: flex; flex-wrap: wrap; gap: 1rem; align-items: center; }
    label.label-custom { font-family: "Safra Mono"; font-size: 14px; letter-spacing: 0; }
    input[type="range"] { -webkit-appearance: none; appearance: none; width: 140px; background: transparent; cursor: pointer; }
    input[type="range"]::-webkit-slider-runnable-track { height: 1px; background: #000; }
    input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 12px; height: 12px; border-radius: 50%; background: #000; margin-top: -5.5px; }

    .font-align-wrapper { display: flex; align-items: center; gap: 0.5rem; }
    select.font-select { font-family: "Safra Mono"; font-size: 14px; border: 1px solid #000; padding: 6px 10px; appearance: none; background: url('assets/dropdown.svg') no-repeat right 0.5em center; background-size: 1em; min-width: 220px; }

    .align-buttons { display: flex; gap: 4px; }
    .icon-btn { width: 32px; height: 32px; border: 1px solid #000; background-color: #fff; cursor: pointer; background-repeat: no-repeat; background-position: center; background-size: 16px; padding: 0; }
    .icon-btn.is-active { outline: 2px solid #000; }
    .align-left  { background-image: url('assets/align-left.svg'); }
    .align-center{ background-image: url('assets/align-center.svg'); }
    .align-right { background-image: url('assets/align-right.svg'); }

    .type-area { width: 100%; border: none; outline: none; color: #000; display: block; white-space: pre-wrap; word-break: break-word; background: transparent; font-family: "Safra"; font-weight: 400; font-size: 40px; line-height: 1.6; letter-spacing: 0em; }
    .type-area::selection { background: yellow; color: black; }

    .column-count-1 { column-count: 1; column-gap: 2rem; }
    .column-count-2 { column-count: 2; column-gap: 2rem; }
    .column-count-3 { column-count: 3; column-gap: 2rem; }

    @media (max-width: 900px) { .column-count-2, .column-count-3 { column-count: 1; } .controls { gap: 0.75rem; } }

    /* ====== GLYPH GRID ====== */
    .wrapper { display: flex; align-items: flex-start; gap: 40px; /*max-width: 1400px;*/ margin: 0 auto 8rem auto; }
    .left-panel { display: flex; flex-direction: column; align-items: center; flex-shrink: 0; width: min(calc(var(--cell-size) * 5), 100%); }
    .preview-box { height: calc(var(--cell-size) * 5); aspect-ratio: 1 / 1; border: 1px solid #000; display: flex; align-items: center; justify-content: center; font-size: calc(var(--cell-size) * 3.3); font-family: "Safra"; overflow: hidden; width: 100%; }
    .controls-lite, .details { width: 100%; font-size: 14px; margin-top: 12px; }
    .grid-container { flex: 1; display: flex; flex-direction: column; width: 100%; /*padding-left: 90px; padding-right: 90px;*/ }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(var(--cell-size), 1fr)); border-left: 1px solid #000; border-top: 1px solid #000; width: 100%; }
    .char-cell { aspect-ratio: 1 / 1; border-right: 1px solid #000; border-bottom: 1px solid #000; display: flex; align-items: center; justify-content: center; cursor: pointer; font-family: "Safra"; font-weight: 400; font-size: calc(var(--cell-size) * 0.53); line-height: 1; transition: background 0.15s ease; }
    .char-cell:hover { background: #000; color: #fff; }

    @media (max-width: 904px) { .wrapper { flex-direction: column; } .preview-box, .details { display: none; } }
  </style>
</head>
<body>

  <!-- === Section 1, multi column text, Serif === -->
  <section class="type-tester">
    <div class="controls">
      <div class="sliders-wrapper">
        <label class="label-custom" for="size-1">Size</label>
        <input class="size" id="size-1" type="range" min="16" max="512" />
        <label class="label-custom" for="leading-1">Leading</label>
        <input class="leading" id="leading-1" type="range" min="0.5" max="2" step="0.05" />
        <label class="label-custom" for="spacing-1">Letter Spacing</label>
        <input class="spacing" id="spacing-1" type="range" min="-0.1" max="0.1" step="0.01" />
      </div>
      <div class="font-align-wrapper">
        <div class="font-wrapper">
          <select class="font-select" aria-label="Font and weight">
            <option value="Safra Regular" selected>Safra Regular</option>
            <option value="Safra Bold">Safra Bold</option>
            <option value="Safra Sans Regular">Safra Sans Regular</option>
            <option value="Safra Sans Bold">Safra Sans Bold</option>
            <option value="Sugar Serif Regular">Sugar Serif Regular</option>
            <option value="Sugar Sans Regular">Sugar Sans Regular</option>
          </select>
        </div>
        <div class="align-buttons" role="group" aria-label="Align">
          <button class="icon-btn align-left"   type="button" data-align="left" aria-label="Align left"></button>
          <button class="icon-btn align-center" type="button" data-align="center" aria-label="Align center"></button>
          <button class="icon-btn align-right"  type="button" data-align="right" aria-label="Align right"></button>
        </div>
      </div>
    </div>

    <div class="type-area column-count-3" contenteditable="true" dir="ltr" style="font-family: Safra; font-weight: 400;">
Stefani Joanne Angelina Germanotta, born March 28, 1986, known professionally as Lady Gaga, is an American singer...
    </div>
  </section>

  <!-- === Section 2, large multilingual headline, Sans Bold, centered === -->
  <section class="type-tester">
    <div class="controls">
      <div class="sliders-wrapper">
        <label class="label-custom" for="size-2">Size</label>
        <input class="size" id="size-2" type="range" min="16" max="512" />
        <label class="label-custom" for="leading-2">Leading</label>
        <input class="leading" id="leading-2" type="range" min="0.5" max="2" step="0.05" />
        <label class="label-custom" for="spacing-2">Letter Spacing</label>
        <input class="spacing" id="spacing-2" type="range" min="-0.1" max="0.1" step="0.01" />
      </div>
      <div class="font-align-wrapper">
        <div class="font-wrapper">
          <select class="font-select" aria-label="Font and weight">
            <option value="Safra Regular">Safra Regular</option>
            <option value="Safra Bold">Safra Bold</option>
            <option value="Safra Sans Regular">Safra Sans Regular</option>
            <option value="Safra Sans Bold" selected>Safra Sans Bold</option>
          </select>
        </div>
        <div class="align-buttons" role="group" aria-label="Align">
          <button class="icon-btn align-left"   type="button" data-align="left" aria-label="Align left"></button>
          <button class="icon-btn align-center is-active" type="button" data-align="center" aria-label="Align center"></button>
          <button class="icon-btn align-right"  type="button" data-align="right" aria-label="Align right"></button>
        </div>
      </div>
    </div>

    <div class="type-area column-count-1" contenteditable="true" dir="rtl" style="font-family: 'Safra Sans'; font-weight: 700; font-size: 196px; line-height: 1; letter-spacing: -0.07em; text-align: center;">שלום مرحبا Hello</div>
  </section>

  <!-- === Section 3, two columns, Sans Regular, long text === -->
  <section class="type-tester">
    <div class="controls">
      <div class="sliders-wrapper">
        <label class="label-custom" for="size-3">Size</label>
        <input class="size" id="size-3" type="range" min="16" max="512" />
        <label class="label-custom" for="leading-3">Leading</label>
        <input class="leading" id="leading-3" type="range" min="0.5" max="2" step="0.05" />
        <label class="label-custom" for="spacing-3">Letter Spacing</label>
        <input class="spacing" id="spacing-3" type="range" min="-0.1" max="0.1" step="0.01" />
      </div>
      <div class="font-align-wrapper">
        <div class="font-wrapper">
          <select class="font-select" aria-label="Font and weight">
            <option value="Safra Regular">Safra Regular</option>
            <option value="Safra Bold">Safra Bold</option>
            <option value="Safra Sans Regular" selected>Safra Sans Regular</option>
            <option value="Safra Sans Bold">Safra Sans Bold</option>
          </select>
        </div>
        <div class="align-buttons" role="group" aria-label="Align">
          <button class="icon-btn align-left is-active"   type="button" data-align="left" aria-label="Align left"></button>
          <button class="icon-btn align-center" type="button" data-align="center" aria-label="Align center"></button>
          <button class="icon-btn align-right"  type="button" data-align="right" aria-label="Align right"></button>
        </div>
      </div>
    </div>

    <div class="type-area column-count-2" contenteditable="true" dir="ltr" style="font-family: 'Safra Sans'; font-weight: 400; font-size: 18px; line-height: 1.5; letter-spacing: 0.01em;">
Stefani Joanne Angelina Germanotta, born March 28, 1986, known professionally as Lady Gaga, is an American singer, songwriter, and actress. Known for her image reinventions and versatility across the entertainment industry, she is an influential figure in popular music. With estimated sales of 124 million records, she is one of the best selling music artists of all time. Publications such as Billboard and Rolling Stone have ranked her among the greatest artists in history.

After signing with Interscope Records in 2007, Gaga achieved global recognition with her debut album, The Fame, 2008, and its reissue, The Fame Monster, 2009. The project scored a string of successful singles, including "Just Dance", "Poker Face", "Bad Romance", "Telephone", and "Alejandro". Her second full length album, Born This Way, 2011, explored electronic rock and techno pop and sold more than one million copies first week. Following her electronic dance music influenced third album, Artpop, 2013, she pursued jazz on Cheek to Cheek, 2014, with Tony Bennett, and delved into soft rock on Joanne, 2016.

Gaga ventured into acting, with leading roles in American Horror Story, Hotel, 2015 to 2016, A Star Is Born, 2018, and House of Gucci, 2021. Her contributions to the A Star Is Born soundtrack, which spawned the chart topping single "Shallow", made her the first woman to win an Academy, BAFTA, Golden Globe, and Grammy Award in one year. Gaga returned to dance pop with Chromatica, 2020, then Love for Sale, 2021.
    </div>
  </section>

  <!-- ===== GLYPH GRID VIEWER ===== -->
  <div class="wrapper" id="fontWrapper">
    <div class="left-panel">
      <div class="preview-box" id="preview" style="font-family: Safra; font-weight: 400;">!</div>
      <div class="controls-lite">
        <label for="weight">Font weight</label>
        <select id="weight">
          <option value="Safra Regular" selected>Safra Regular</option>
          <option value="Safra Bold">Safra Bold</option>
          <option value="Safra Sans Regular">Safra Sans Regular</option>
          <option value="Safra Sans Bold">Safra Sans Bold</option>
          <option value="Sugar Serif Regular">Sugar Serif Regular</option>
          <option value="Sugar Sans Regular">Sugar Sans Regular</option>
        </select>
      </div>
      <div class="details" id="details">Unicode decimal: 33<br>Unicode hex: 0021<br>HTML entity: !</div>
    </div>
    <div class="grid-container">
      <div class="grid" id="grid"></div>
    </div>
  </div>

  <!-- ===== DATA MAPS ===== -->
  <script type="application/json" id="fontMap">{
    "Safra Regular": { "family": "Safra", "weight": 400 },
    "Safra Bold": { "family": "Safra", "weight": 700 },
    "Safra Sans Regular": { "family": "Safra Sans", "weight": 400 },
    "Safra Sans Bold": { "family": "Safra Sans", "weight": 700 },
    "Sugar Serif Regular": { "family": "Sugar Serif", "weight": 400 },
    "Sugar Sans Regular": { "family": "Sugar Sans", "weight": 400 }
  }</script>

  <script type="application/json" id="glyphMap">{
    "default": "!\"#$%&'()*+,-./0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
    "Safra2": "0123456789!\"#$%&'()*+,-./:;<=>?@[\\]^_{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzאבגדהוזחטסעפצקרשתابتثجحخدذرزسشصضطظعغفقكلمنهويﺍﺎﺄﺃﺈﺍبﺏﺑﺒتﺕﺗﺘثﺙﺛﺜجﺝﺟﺠحﺡﺣﺤخﺥﺧﺨدﺩﺪذﺫﺬرﺭﺮزﺯﺰسﺱﺳﺴشﺵﺷﺸصﺹﺻﺼضﺽﺿﺾطﻁﻃﻄظﻅﻇﻈعﻉﻋﻌغﻍﻏﻐفﻑﻓﻔقﻕﻗﻘكﻙﻛﻜلﻝﻟﻠمﻡﻣﻤنﻥﻧﻨهﻩﻫﻬوﻭﻮيﻱﻳﻴ"
  }</script>

  <!-- ===== SCRIPT ===== -->
  <script>
    function updateFontTargets(targets, family, weight) {
      targets.forEach(el => { el.style.fontFamily = family; el.style.fontWeight = String(weight); });
    }

    function initTypingControls() {
      const fontMap = JSON.parse(document.getElementById('fontMap').textContent);
      document.querySelectorAll('.type-tester').forEach(section => {
        const textArea = section.querySelector('.type-area');
        const size = section.querySelector('.size');
        const leading = section.querySelector('.leading');
        const spacing = section.querySelector('.spacing');
        const select = section.querySelector('.font-select');
        const alignWrap = section.querySelector('.align-buttons');

        if (!textArea) return;

        // Init from computed styles
        const cs = getComputedStyle(textArea);
        size.value = parseFloat(cs.fontSize) || 40;
        leading.value = (parseFloat(cs.lineHeight) / parseFloat(cs.fontSize) || 1.2).toFixed(2);
        const ls = parseFloat(cs.letterSpacing);
        spacing.value = isNaN(ls) ? 0 : (ls / parseFloat(cs.fontSize)).toFixed(2);

        // Sliders
        size.addEventListener('input', () => { textArea.style.fontSize = size.value + 'px'; });
        leading.addEventListener('input', () => { textArea.style.lineHeight = leading.value; });
        spacing.addEventListener('input', () => { textArea.style.letterSpacing = spacing.value + 'em'; });

        // Font selector, apply both family and weight
        const applySelect = () => {
          const cfg = fontMap[select.value] || { family: 'sans-serif', weight: 400 };
          textArea.style.fontFamily = cfg.family;
          textArea.style.fontWeight = String(cfg.weight);
        };
        select.addEventListener('change', applySelect);
        applySelect();

        // Align buttons, delegation
        if (alignWrap) {
          alignWrap.addEventListener('click', e => {
            const btn = e.target.closest('.icon-btn');
            if (!btn) return;
            textArea.style.textAlign = btn.dataset.align || 'left';
            alignWrap.querySelectorAll('.icon-btn').forEach(b => b.classList.toggle('is-active', b === btn));
          });
        }

        // Direction auto detect on input
        const rtlRegex = /[\u0590-\u08FF]/; // Hebrew and Arabic ranges
        const updateDir = () => {
          const t = textArea.innerText.trim();
          const first = t.charAt(0);
          const dir = rtlRegex.test(first) ? 'rtl' : 'ltr';
          textArea.setAttribute('dir', dir);
        };
        textArea.addEventListener('input', updateDir);
        updateDir();
      });
    }

    function initGlyphGrid() {
      const grid = document.getElementById('grid');
      const preview = document.getElementById('preview');
      const details = document.getElementById('details');
      const weightSel = document.getElementById('weight');
      const fontMap = JSON.parse(document.getElementById('fontMap').textContent);
      const glyphMap = JSON.parse(document.getElementById('glyphMap').textContent);

      const key = 'Safra2';
      const chars = [...(glyphMap[key] || glyphMap.default || '')];
      grid.innerHTML = '';

      chars.forEach(ch => {
        const cell = document.createElement('div');
        cell.className = 'char-cell';
        cell.textContent = ch;
        cell.addEventListener('mouseover', () => {
          if (preview) preview.textContent = ch;
          if (details) {
            const code = ch.codePointAt(0);
            details.innerHTML = `Unicode decimal: ${code}<br>Unicode hex: ${code.toString(16).toUpperCase().padStart(4,'0')}<br>HTML entity: &#x${code.toString(16).toUpperCase()};`;
          }
        });
        grid.appendChild(cell);
      });

      const apply = () => {
        const cfg = fontMap[weightSel.value] || { family: 'sans-serif', weight: 400 };
        updateFontTargets(document.querySelectorAll('.char-cell'), cfg.family, cfg.weight);
        if (preview) { preview.style.fontFamily = cfg.family; preview.style.fontWeight = String(cfg.weight); }
      };
      weightSel.addEventListener('change', apply);
      apply();
    }

    function adjustPreviewHeight() {
  const sampleCell = document.querySelector('.char-cell');
  const preview = document.getElementById('preview');
  const leftPanel = document.querySelector('.left-panel');
  if (!sampleCell || !preview || !leftPanel) return;

  const cellHeight = sampleCell.offsetHeight;
  const width = window.innerWidth;
  let cellCount, panelWidth;

  if (width <= 600) {
    cellCount = 6;
    preview.style.width = '100%';
    leftPanel.style.width = '100%';
    const previewWidth = leftPanel.offsetWidth;
    const cellSize = previewWidth / cellCount;
    preview.style.height = `${cellSize * cellCount}px`;
  } else {
    cellCount = width <= 984 ? 3 : width <= 1305 ? 4 : 5;
    panelWidth = cellHeight * cellCount;
    preview.style.width = `${panelWidth}px`;
    preview.style.height = `${cellHeight * cellCount}px`;
    leftPanel.style.width = `${panelWidth}px`;
  }
}

function boot() { initTypingControls(); initGlyphGrid(); adjustPreviewHeight(); }

document.addEventListener('DOMContentLoaded', boot); window.addEventListener('resize', adjustPreviewHeight);
  </script>
</body>
</html>